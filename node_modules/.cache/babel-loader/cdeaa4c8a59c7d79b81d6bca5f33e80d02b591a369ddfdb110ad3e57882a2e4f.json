{"ast":null,"code":"import{useState}from'react';import{addComment}from'../services/socialService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CommentSection(_ref){let{postId,comments=[],onCommentAdded}=_ref;const[commentContent,setCommentContent]=useState('');const[isSubmitting,setIsSubmitting]=useState(false);const handleSubmit=async e=>{e.preventDefault();if(!commentContent.trim())return;setIsSubmitting(true);try{await addComment(postId,commentContent.trim());setCommentContent('');if(onCommentAdded){onCommentAdded();}}catch(error){console.error('Erreur lors de l\\'ajout du commentaire:',error);}finally{setIsSubmitting(false);}};const handleKeyPress=e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();handleSubmit(e);}};// Calculer le temps écoulé\nconst getTimeAgo=timestamp=>{if(!timestamp)return'';const now=new Date();const commentDate=new Date(timestamp);const seconds=Math.floor((now-commentDate)/1000);if(seconds<60)return\"Il y a \".concat(seconds,\"s\");const minutes=Math.floor(seconds/60);if(minutes<60)return\"Il y a \".concat(minutes,\"min\");const hours=Math.floor(minutes/60);if(hours<24)return\"Il y a \".concat(hours,\"h\");const days=Math.floor(hours/24);return\"Il y a \".concat(days,\"j\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 pt-3 border-t border-red-700\",children:[/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,className:\"mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:commentContent,onChange:e=>setCommentContent(e.target.value),onKeyPress:handleKeyPress,placeholder:\"Ajouter un commentaire...\",className:\"flex-1 p-2 rounded-md bg-red-900 text-white placeholder-red-300 border-none focus:outline-none focus:ring-2 focus:ring-red-600 text-sm\",disabled:isSubmitting}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSubmitting||!commentContent.trim(),className:\"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm\",children:\"Envoyer\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:comments.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-red-300 text-sm text-center py-3\",children:\"Aucun commentaire pour le moment\"}):comments.map((comment,index)=>{const initials=(comment.username||'U').substring(0,2).toUpperCase();return/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-900 rounded-md p-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-red-700 flex items-center justify-center font-bold text-xs flex-shrink-0\",children:initials}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-baseline gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-bold text-sm\",children:comment.username||'Utilisateur'}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-red-300\",children:getTimeAgo(comment.createdAt)})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm mt-1 break-words\",children:comment.content})]})]})},index);})})]});}","map":{"version":3,"names":["useState","addComment","jsx","_jsx","jsxs","_jsxs","CommentSection","_ref","postId","comments","onCommentAdded","commentContent","setCommentContent","isSubmitting","setIsSubmitting","handleSubmit","e","preventDefault","trim","error","console","handleKeyPress","key","shiftKey","getTimeAgo","timestamp","now","Date","commentDate","seconds","Math","floor","concat","minutes","hours","days","className","children","onSubmit","type","value","onChange","target","onKeyPress","placeholder","disabled","length","map","comment","index","initials","username","substring","toUpperCase","createdAt","content"],"sources":["C:/Users/Hp/Desktop/frontend/src/components/comment-section.js"],"sourcesContent":["import { useState } from 'react';\r\nimport { addComment } from '../services/socialService';\r\n\r\nexport default function CommentSection({ postId, comments = [], onCommentAdded }) {\r\n  const [commentContent, setCommentContent] = useState('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!commentContent.trim()) return;\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      await addComment(postId, commentContent.trim());\r\n      setCommentContent('');\r\n      if (onCommentAdded) {\r\n        onCommentAdded();\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur lors de l\\'ajout du commentaire:', error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSubmit(e);\r\n    }\r\n  };\r\n\r\n  // Calculer le temps écoulé\r\n  const getTimeAgo = (timestamp) => {\r\n    if (!timestamp) return '';\r\n    \r\n    const now = new Date();\r\n    const commentDate = new Date(timestamp);\r\n    const seconds = Math.floor((now - commentDate) / 1000);\r\n\r\n    if (seconds < 60) return `Il y a ${seconds}s`;\r\n    const minutes = Math.floor(seconds / 60);\r\n    if (minutes < 60) return `Il y a ${minutes}min`;\r\n    const hours = Math.floor(minutes / 60);\r\n    if (hours < 24) return `Il y a ${hours}h`;\r\n    const days = Math.floor(hours / 24);\r\n    return `Il y a ${days}j`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-3 pt-3 border-t border-red-700\">\r\n      {/* Formulaire d'ajout de commentaire */}\r\n      <form onSubmit={handleSubmit} className=\"mb-3\">\r\n        <div className=\"flex gap-2\">\r\n          <input\r\n            type=\"text\"\r\n            value={commentContent}\r\n            onChange={(e) => setCommentContent(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n            placeholder=\"Ajouter un commentaire...\"\r\n            className=\"flex-1 p-2 rounded-md bg-red-900 text-white placeholder-red-300 border-none focus:outline-none focus:ring-2 focus:ring-red-600 text-sm\"\r\n            disabled={isSubmitting}\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isSubmitting || !commentContent.trim()}\r\n            className=\"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm\"\r\n          >\r\n            Envoyer\r\n          </button>\r\n        </div>\r\n      </form>\r\n\r\n      {/* Liste des commentaires */}\r\n      <div className=\"space-y-2\">\r\n        {comments.length === 0 ? (\r\n          <p className=\"text-red-300 text-sm text-center py-3\">\r\n            Aucun commentaire pour le moment\r\n          </p>\r\n        ) : (\r\n          comments.map((comment, index) => {\r\n            const initials = (comment.username || 'U').substring(0, 2).toUpperCase();\r\n            \r\n            return (\r\n              <div key={index} className=\"bg-red-900 rounded-md p-3\">\r\n                <div className=\"flex items-start gap-2\">\r\n                  <div className=\"w-8 h-8 rounded-full bg-red-700 flex items-center justify-center font-bold text-xs flex-shrink-0\">\r\n                    {initials}\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-baseline gap-2\">\r\n                      <span className=\"font-bold text-sm\">{comment.username || 'Utilisateur'}</span>\r\n                      <span className=\"text-xs text-red-300\">{getTimeAgo(comment.createdAt)}</span>\r\n                    </div>\r\n                    <p className=\"text-sm mt-1 break-words\">{comment.content}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}