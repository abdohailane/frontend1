{"ast":null,"code":"import _objectSpread from\"C:/Users/Hp/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"C:/Users/Hp/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";const _excluded=[\"className\",\"onSignUp\",\"onLogin\"];import{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL=process.env.REACT_APP_API_BASE_URL||'http://localhost:8081/api/users';export function LoginForm(_ref){let{className,onSignUp,onLogin}=_ref,props=_objectWithoutProperties(_ref,_excluded);const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const[success,setSuccess]=useState('');const[loading,setLoading]=useState(false);const handleSubmit=async event=>{event.preventDefault();setError('');setSuccess('');setLoading(true);const formData={email,password};try{const response=await fetch(\"\".concat(API_BASE_URL,\"/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});const data=await response.json();if(response.ok){setSuccess('✅ Connexion réussie ! Redirection...');localStorage.setItem('token',data.token||'');localStorage.setItem('userId',data.id||'');localStorage.setItem('username',data.username||'');localStorage.setItem('email',data.email||'');localStorage.setItem('countryCode',data.countryCode||'DZ');localStorage.setItem('createdAt',data.createdAt||new Date().toISOString());setTimeout(()=>{onLogin===null||onLogin===void 0?void 0:onLogin(data);},1500);}else{setError('❌ Email ou mot de passe incorrect');setLoading(false);}}catch(err){console.error('Erreur:',err);setError('❌ Erreur de connexion au serveur');setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({className:\"flex flex-col gap-6 \".concat(className||'')},props),{},{children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-1 text-center\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/images/logo.png\",alt:\"Logo\",className:\"h-23 w-23 mx-auto mb-1\"})}),/*#__PURE__*/_jsxs(\"form\",{className:\"space-y-4\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-white\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",type:\"email\",placeholder:\"m@example.com\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-white\",children:\"Password\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"text-sm text-blue-300 hover:underline\",children:\"Forgot your password?\"})]}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:password,onChange:e=>setPassword(e.target.value),required:true})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-400 text-center\",role:\"alert\",children:error}),success&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-green-400 text-center\",role:\"status\",children:success}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-3 pt-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 rounded-md disabled:opacity-60\",disabled:loading,children:loading?'Connexion...':'Se connecter'}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"w-full border border-gray-300 text-white font-medium py-2 rounded-md hover:border-gray-400\",children:\"Login with Google\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-sm text-gray-300\",children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onSignUp,className:\"text-blue-300 hover:underline\",children:\"Sign up\"})]})]})]})]})}));}","map":{"version":3,"names":["useState","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","LoginForm","_ref","className","onSignUp","onLogin","props","_objectWithoutProperties","_excluded","email","setEmail","password","setPassword","error","setError","success","setSuccess","loading","setLoading","handleSubmit","event","preventDefault","formData","response","fetch","concat","method","headers","body","JSON","stringify","data","json","ok","localStorage","setItem","token","id","username","countryCode","createdAt","Date","toISOString","setTimeout","err","console","_objectSpread","children","src","alt","onSubmit","htmlFor","type","placeholder","value","onChange","e","target","required","role","disabled","onClick"],"sources":["C:/Users/Hp/Desktop/frontend/src/components/login-form.js"],"sourcesContent":["import { useState } from 'react';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:8081/api/users';\r\n\r\nexport function LoginForm({ className, onSignUp, onLogin, ...props }) {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    setError('');\r\n    setSuccess('');\r\n    setLoading(true);\r\n\r\n    const formData = { email, password };\r\n\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/login`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok) {\r\n        setSuccess('✅ Connexion réussie ! Redirection...');\r\n        localStorage.setItem('token', data.token || '');\r\n        localStorage.setItem('userId', data.id || '');\r\n        localStorage.setItem('username', data.username || '');\r\n        localStorage.setItem('email', data.email || '');\r\n        localStorage.setItem('countryCode', data.countryCode || 'DZ');\r\n        localStorage.setItem('createdAt', data.createdAt || new Date().toISOString());\r\n\r\n        setTimeout(() => {\r\n          onLogin?.(data);\r\n        }, 1500);\r\n      } else {\r\n        setError('❌ Email ou mot de passe incorrect');\r\n        setLoading(false);\r\n      }\r\n    } catch (err) {\r\n      console.error('Erreur:', err);\r\n      setError('❌ Erreur de connexion au serveur');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`flex flex-col gap-6 ${className || ''}`} {...props}>\r\n      <div className=\"w-full p-6\">\r\n        <div className=\"mb-1 text-center\">\r\n          <img src=\"/images/logo.png\" alt=\"Logo\" className=\"h-23 w-23 mx-auto mb-1\" />\r\n        </div>\r\n        <form className=\"space-y-4\" onSubmit={handleSubmit}>\r\n          <div>\r\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-white\">Email</label>\r\n            <input\r\n              id=\"email\"\r\n              type=\"email\"\r\n              placeholder=\"m@example.com\"\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n          <div>\r\n            <div className=\"flex justify-between items-center mb-2\">\r\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-white\">Password</label>\r\n              <button type=\"button\" className=\"text-sm text-blue-300 hover:underline\">Forgot your password?</button>\r\n            </div>\r\n            <input\r\n              id=\"password\"\r\n              type=\"password\"\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {error && <p className=\"text-sm text-red-400 text-center\" role=\"alert\">{error}</p>}\r\n          {success && <p className=\"text-sm text-green-400 text-center\" role=\"status\">{success}</p>}\r\n\r\n          <div className=\"flex flex-col gap-3 pt-2\">\r\n            <button\r\n              type=\"submit\"\r\n              className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 rounded-md disabled:opacity-60\"\r\n              disabled={loading}\r\n            >\r\n              {loading ? 'Connexion...' : 'Se connecter'}\r\n            </button>\r\n            <button type=\"button\" className=\"w-full border border-gray-300 text-white font-medium py-2 rounded-md hover:border-gray-400\">\r\n              Login with Google\r\n            </button>\r\n            <p className=\"text-center text-sm text-gray-300\">\r\n              Don't have an account? <button type=\"button\" onClick={onSignUp} className=\"text-blue-300 hover:underline\">Sign up</button>\r\n            </p>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}