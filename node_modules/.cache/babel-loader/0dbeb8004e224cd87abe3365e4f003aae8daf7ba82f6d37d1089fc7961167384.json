{"ast":null,"code":"import{API_CONFIG}from'../config/config';// URL de l'API Social Service\nconst SOCIAL_API_URL=\"\".concat(API_CONFIG.SOCIAL_SERVICE,\"/api\");// Récupérer l'userId depuis le localStorage\nconst getCurrentUserId=()=>{return localStorage.getItem('userId');};// Récupérer le username depuis le localStorage\nconst getCurrentUsername=()=>{return localStorage.getItem('username')||'Utilisateur';};// GET - Récupérer tous les posts\nexport const getAllPosts=async()=>{try{const userId=getCurrentUserId();const url=userId?\"\".concat(SOCIAL_API_URL,\"/posts?currentUserId=\").concat(userId):\"\".concat(SOCIAL_API_URL,\"/posts\");const response=await fetch(url);if(!response.ok){throw new Error(\"HTTP \".concat(response.status));}const posts=await response.json();return posts;}catch(error){console.error('❌ Error fetching posts:',error);throw error;}};// POST - Créer un nouveau post\nexport const createPost=async content=>{try{const userId=getCurrentUserId();const username=getCurrentUsername();if(!userId){throw new Error('User not logged in');}const response=await fetch(\"\".concat(SOCIAL_API_URL,\"/posts\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId:userId,username:username,content:content})});if(!response.ok){throw new Error(\"HTTP \".concat(response.status));}const newPost=await response.json();return newPost;}catch(error){console.error('❌ Error creating post:',error);throw error;}};// POST - Liker un post\nexport const likePost=async postId=>{try{const userId=getCurrentUserId();if(!userId){throw new Error('User not logged in');}const response=await fetch(\"\".concat(SOCIAL_API_URL,\"/posts/\").concat(postId,\"/like?userId=\").concat(userId),{method:'POST'});if(!response.ok){throw new Error(\"HTTP \".concat(response.status));}const updatedPost=await response.json();return updatedPost;}catch(error){console.error('❌ Error liking post:',error);throw error;}};// POST - Unliker un post\nexport const unlikePost=async postId=>{try{const userId=getCurrentUserId();if(!userId){throw new Error('User not logged in');}const response=await fetch(\"\".concat(SOCIAL_API_URL,\"/posts/\").concat(postId,\"/unlike?userId=\").concat(userId),{method:'POST'});if(!response.ok){throw new Error(\"HTTP \".concat(response.status));}const updatedPost=await response.json();return updatedPost;}catch(error){console.error('❌ Error unliking post:',error);throw error;}};// GET - Récupérer un post avec ses commentaires\nexport const getPostDetails=async postId=>{try{const userId=getCurrentUserId();const url=userId?\"\".concat(SOCIAL_API_URL,\"/posts/\").concat(postId,\"?currentUserId=\").concat(userId):\"\".concat(SOCIAL_API_URL,\"/posts/\").concat(postId);const response=await fetch(url);if(!response.ok){throw new Error(\"HTTP \".concat(response.status));}const post=await response.json();return post;}catch(error){console.error('❌ Error fetching post details:',error);throw error;}};// POST - Ajouter un commentaire\nexport const addComment=async(postId,content)=>{try{const userId=getCurrentUserId();const username=getCurrentUsername();if(!userId){throw new Error('User not logged in');}const response=await fetch(\"\".concat(SOCIAL_API_URL,\"/posts/\").concat(postId,\"/comments\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId:userId,username:username,content:content})});if(!response.ok){throw new Error(\"HTTP \".concat(response.status));}const newComment=await response.json();return newComment;}catch(error){console.error('❌ Error adding comment:',error);throw error;}};export default{getAllPosts,createPost,likePost,unlikePost,getPostDetails,addComment};","map":{"version":3,"names":["API_CONFIG","SOCIAL_API_URL","concat","SOCIAL_SERVICE","getCurrentUserId","localStorage","getItem","getCurrentUsername","getAllPosts","userId","url","response","fetch","ok","Error","status","posts","json","error","console","createPost","content","username","method","headers","body","JSON","stringify","newPost","likePost","postId","updatedPost","unlikePost","getPostDetails","post","addComment","newComment"],"sources":["C:/Users/Hp/Desktop/frontend/src/services/socialService.js"],"sourcesContent":["import { API_CONFIG } from '../config/config';\r\n\r\n// URL de l'API Social Service\r\nconst SOCIAL_API_URL = `${API_CONFIG.SOCIAL_SERVICE}/api`;\r\n\r\n// Récupérer l'userId depuis le localStorage\r\nconst getCurrentUserId = () => {\r\n  return localStorage.getItem('userId');\r\n};\r\n\r\n// Récupérer le username depuis le localStorage\r\nconst getCurrentUsername = () => {\r\n  return localStorage.getItem('username') || 'Utilisateur';\r\n};\r\n\r\n// GET - Récupérer tous les posts\r\nexport const getAllPosts = async () => {\r\n  try {\r\n    const userId = getCurrentUserId();\r\n    const url = userId \r\n      ? `${SOCIAL_API_URL}/posts?currentUserId=${userId}`\r\n      : `${SOCIAL_API_URL}/posts`;\r\n    \r\n    const response = await fetch(url);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n    const posts = await response.json();\r\n    return posts;\r\n  } catch (error) {\r\n    console.error('❌ Error fetching posts:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// POST - Créer un nouveau post\r\nexport const createPost = async (content) => {\r\n  try {\r\n    const userId = getCurrentUserId();\r\n    const username = getCurrentUsername();\r\n\r\n    if (!userId) {\r\n      throw new Error('User not logged in');\r\n    }\r\n\r\n    const response = await fetch(`${SOCIAL_API_URL}/posts`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        userId: userId,\r\n        username: username,\r\n        content: content\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n\r\n    const newPost = await response.json();\r\n    return newPost;\r\n  } catch (error) {\r\n    console.error('❌ Error creating post:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// POST - Liker un post\r\nexport const likePost = async (postId) => {\r\n  try {\r\n    const userId = getCurrentUserId();\r\n    if (!userId) {\r\n      throw new Error('User not logged in');\r\n    }\r\n\r\n    const response = await fetch(\r\n      `${SOCIAL_API_URL}/posts/${postId}/like?userId=${userId}`,\r\n      { method: 'POST' }\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n\r\n    const updatedPost = await response.json();\r\n    return updatedPost;\r\n  } catch (error) {\r\n    console.error('❌ Error liking post:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// POST - Unliker un post\r\nexport const unlikePost = async (postId) => {\r\n  try {\r\n    const userId = getCurrentUserId();\r\n    if (!userId) {\r\n      throw new Error('User not logged in');\r\n    }\r\n\r\n    const response = await fetch(\r\n      `${SOCIAL_API_URL}/posts/${postId}/unlike?userId=${userId}`,\r\n      { method: 'POST' }\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n\r\n    const updatedPost = await response.json();\r\n    return updatedPost;\r\n  } catch (error) {\r\n    console.error('❌ Error unliking post:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// GET - Récupérer un post avec ses commentaires\r\nexport const getPostDetails = async (postId) => {\r\n  try {\r\n    const userId = getCurrentUserId();\r\n    const url = userId\r\n      ? `${SOCIAL_API_URL}/posts/${postId}?currentUserId=${userId}`\r\n      : `${SOCIAL_API_URL}/posts/${postId}`;\r\n\r\n    const response = await fetch(url);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n\r\n    const post = await response.json();\r\n    return post;\r\n  } catch (error) {\r\n    console.error('❌ Error fetching post details:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// POST - Ajouter un commentaire\r\nexport const addComment = async (postId, content) => {\r\n  try {\r\n    const userId = getCurrentUserId();\r\n    const username = getCurrentUsername();\r\n\r\n    if (!userId) {\r\n      throw new Error('User not logged in');\r\n    }\r\n\r\n    const response = await fetch(`${SOCIAL_API_URL}/posts/${postId}/comments`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        userId: userId,\r\n        username: username,\r\n        content: content\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n\r\n    const newComment = await response.json();\r\n    return newComment;\r\n  } catch (error) {\r\n    console.error('❌ Error adding comment:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport default {\r\n  getAllPosts,\r\n  createPost,\r\n  likePost,\r\n  unlikePost,\r\n  getPostDetails,\r\n  addComment\r\n};\r\n"],"mappings":"AAAA,OAASA,UAAU,KAAQ,kBAAkB,CAE7C;AACA,KAAM,CAAAC,cAAc,IAAAC,MAAA,CAAMF,UAAU,CAACG,cAAc,QAAM,CAEzD;AACA,KAAM,CAAAC,gBAAgB,CAAGA,CAAA,GAAM,CAC7B,MAAO,CAAAC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC,CACvC,CAAC,CAED;AACA,KAAM,CAAAC,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,MAAO,CAAAF,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,EAAI,aAAa,CAC1D,CAAC,CAED;AACA,MAAO,MAAM,CAAAE,WAAW,CAAG,KAAAA,CAAA,GAAY,CACrC,GAAI,CACF,KAAM,CAAAC,MAAM,CAAGL,gBAAgB,CAAC,CAAC,CACjC,KAAM,CAAAM,GAAG,CAAGD,MAAM,IAAAP,MAAA,CACXD,cAAc,0BAAAC,MAAA,CAAwBO,MAAM,KAAAP,MAAA,CAC5CD,cAAc,UAAQ,CAE7B,KAAM,CAAAU,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACF,GAAG,CAAC,CACjC,GAAI,CAACC,QAAQ,CAACE,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,SAAAZ,MAAA,CAASS,QAAQ,CAACI,MAAM,CAAE,CAAC,CAC5C,CACA,KAAM,CAAAC,KAAK,CAAG,KAAM,CAAAL,QAAQ,CAACM,IAAI,CAAC,CAAC,CACnC,MAAO,CAAAD,KAAK,CACd,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/C,KAAM,CAAAA,KAAK,CACb,CACF,CAAC,CAED;AACA,MAAO,MAAM,CAAAE,UAAU,CAAG,KAAO,CAAAC,OAAO,EAAK,CAC3C,GAAI,CACF,KAAM,CAAAZ,MAAM,CAAGL,gBAAgB,CAAC,CAAC,CACjC,KAAM,CAAAkB,QAAQ,CAAGf,kBAAkB,CAAC,CAAC,CAErC,GAAI,CAACE,MAAM,CAAE,CACX,KAAM,IAAI,CAAAK,KAAK,CAAC,oBAAoB,CAAC,CACvC,CAEA,KAAM,CAAAH,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAV,MAAA,CAAID,cAAc,WAAU,CACtDsB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBlB,MAAM,CAAEA,MAAM,CACda,QAAQ,CAAEA,QAAQ,CAClBD,OAAO,CAAEA,OACX,CAAC,CACH,CAAC,CAAC,CAEF,GAAI,CAACV,QAAQ,CAACE,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,SAAAZ,MAAA,CAASS,QAAQ,CAACI,MAAM,CAAE,CAAC,CAC5C,CAEA,KAAM,CAAAa,OAAO,CAAG,KAAM,CAAAjB,QAAQ,CAACM,IAAI,CAAC,CAAC,CACrC,MAAO,CAAAW,OAAO,CAChB,CAAE,MAAOV,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9C,KAAM,CAAAA,KAAK,CACb,CACF,CAAC,CAED;AACA,MAAO,MAAM,CAAAW,QAAQ,CAAG,KAAO,CAAAC,MAAM,EAAK,CACxC,GAAI,CACF,KAAM,CAAArB,MAAM,CAAGL,gBAAgB,CAAC,CAAC,CACjC,GAAI,CAACK,MAAM,CAAE,CACX,KAAM,IAAI,CAAAK,KAAK,CAAC,oBAAoB,CAAC,CACvC,CAEA,KAAM,CAAAH,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAV,MAAA,CACvBD,cAAc,YAAAC,MAAA,CAAU4B,MAAM,kBAAA5B,MAAA,CAAgBO,MAAM,EACvD,CAAEc,MAAM,CAAE,MAAO,CACnB,CAAC,CAED,GAAI,CAACZ,QAAQ,CAACE,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,SAAAZ,MAAA,CAASS,QAAQ,CAACI,MAAM,CAAE,CAAC,CAC5C,CAEA,KAAM,CAAAgB,WAAW,CAAG,KAAM,CAAApB,QAAQ,CAACM,IAAI,CAAC,CAAC,CACzC,MAAO,CAAAc,WAAW,CACpB,CAAE,MAAOb,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC5C,KAAM,CAAAA,KAAK,CACb,CACF,CAAC,CAED;AACA,MAAO,MAAM,CAAAc,UAAU,CAAG,KAAO,CAAAF,MAAM,EAAK,CAC1C,GAAI,CACF,KAAM,CAAArB,MAAM,CAAGL,gBAAgB,CAAC,CAAC,CACjC,GAAI,CAACK,MAAM,CAAE,CACX,KAAM,IAAI,CAAAK,KAAK,CAAC,oBAAoB,CAAC,CACvC,CAEA,KAAM,CAAAH,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAV,MAAA,CACvBD,cAAc,YAAAC,MAAA,CAAU4B,MAAM,oBAAA5B,MAAA,CAAkBO,MAAM,EACzD,CAAEc,MAAM,CAAE,MAAO,CACnB,CAAC,CAED,GAAI,CAACZ,QAAQ,CAACE,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,SAAAZ,MAAA,CAASS,QAAQ,CAACI,MAAM,CAAE,CAAC,CAC5C,CAEA,KAAM,CAAAgB,WAAW,CAAG,KAAM,CAAApB,QAAQ,CAACM,IAAI,CAAC,CAAC,CACzC,MAAO,CAAAc,WAAW,CACpB,CAAE,MAAOb,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9C,KAAM,CAAAA,KAAK,CACb,CACF,CAAC,CAED;AACA,MAAO,MAAM,CAAAe,cAAc,CAAG,KAAO,CAAAH,MAAM,EAAK,CAC9C,GAAI,CACF,KAAM,CAAArB,MAAM,CAAGL,gBAAgB,CAAC,CAAC,CACjC,KAAM,CAAAM,GAAG,CAAGD,MAAM,IAAAP,MAAA,CACXD,cAAc,YAAAC,MAAA,CAAU4B,MAAM,oBAAA5B,MAAA,CAAkBO,MAAM,KAAAP,MAAA,CACtDD,cAAc,YAAAC,MAAA,CAAU4B,MAAM,CAAE,CAEvC,KAAM,CAAAnB,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACF,GAAG,CAAC,CACjC,GAAI,CAACC,QAAQ,CAACE,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,SAAAZ,MAAA,CAASS,QAAQ,CAACI,MAAM,CAAE,CAAC,CAC5C,CAEA,KAAM,CAAAmB,IAAI,CAAG,KAAM,CAAAvB,QAAQ,CAACM,IAAI,CAAC,CAAC,CAClC,MAAO,CAAAiB,IAAI,CACb,CAAE,MAAOhB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACtD,KAAM,CAAAA,KAAK,CACb,CACF,CAAC,CAED;AACA,MAAO,MAAM,CAAAiB,UAAU,CAAG,KAAAA,CAAOL,MAAM,CAAET,OAAO,GAAK,CACnD,GAAI,CACF,KAAM,CAAAZ,MAAM,CAAGL,gBAAgB,CAAC,CAAC,CACjC,KAAM,CAAAkB,QAAQ,CAAGf,kBAAkB,CAAC,CAAC,CAErC,GAAI,CAACE,MAAM,CAAE,CACX,KAAM,IAAI,CAAAK,KAAK,CAAC,oBAAoB,CAAC,CACvC,CAEA,KAAM,CAAAH,QAAQ,CAAG,KAAM,CAAAC,KAAK,IAAAV,MAAA,CAAID,cAAc,YAAAC,MAAA,CAAU4B,MAAM,cAAa,CACzEP,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBlB,MAAM,CAAEA,MAAM,CACda,QAAQ,CAAEA,QAAQ,CAClBD,OAAO,CAAEA,OACX,CAAC,CACH,CAAC,CAAC,CAEF,GAAI,CAACV,QAAQ,CAACE,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,SAAAZ,MAAA,CAASS,QAAQ,CAACI,MAAM,CAAE,CAAC,CAC5C,CAEA,KAAM,CAAAqB,UAAU,CAAG,KAAM,CAAAzB,QAAQ,CAACM,IAAI,CAAC,CAAC,CACxC,MAAO,CAAAmB,UAAU,CACnB,CAAE,MAAOlB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/C,KAAM,CAAAA,KAAK,CACb,CACF,CAAC,CAED,cAAe,CACbV,WAAW,CACXY,UAAU,CACVS,QAAQ,CACRG,UAAU,CACVC,cAAc,CACdE,UACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}