{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hp\\\\Desktop\\\\Cloud_Project\\\\frontend\\\\src\\\\components\\\\comment-section.js\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { addComment } from '../services/socialService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CommentSection({\n  postId,\n  comments = [],\n  onCommentAdded\n}) {\n  _s();\n  const [commentContent, setCommentContent] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!commentContent.trim()) return;\n    setIsSubmitting(true);\n    try {\n      await addComment(postId, commentContent.trim());\n      setCommentContent('');\n      if (onCommentAdded) {\n        onCommentAdded();\n      }\n    } catch (error) {\n      console.error('Erreur lors de l\\'ajout du commentaire:', error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n\n  // Calculer le temps écoulé\n  const getTimeAgo = timestamp => {\n    if (!timestamp) return '';\n    const now = new Date();\n    const commentDate = new Date(timestamp);\n    const seconds = Math.floor((now - commentDate) / 1000);\n    if (seconds < 60) return `Il y a ${seconds}s`;\n    const minutes = Math.floor(seconds / 60);\n    if (minutes < 60) return `Il y a ${minutes}min`;\n    const hours = Math.floor(minutes / 60);\n    if (hours < 24) return `Il y a ${hours}h`;\n    const days = Math.floor(hours / 24);\n    return `Il y a ${days}j`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-3 pt-3 border-t border-red-700\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"mb-3\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: commentContent,\n          onChange: e => setCommentContent(e.target.value),\n          onKeyPress: handleKeyPress,\n          placeholder: \"Ajouter un commentaire...\",\n          className: \"flex-1 p-2 rounded-md bg-red-900 text-white placeholder-red-300 border-none focus:outline-none focus:ring-2 focus:ring-red-600 text-sm\",\n          disabled: isSubmitting\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: isSubmitting || !commentContent.trim(),\n          className: \"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm\",\n          children: \"Envoyer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: comments.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-300 text-sm text-center py-3\",\n        children: \"Aucun commentaire pour le moment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this) : comments.map((comment, index) => {\n        const initials = (comment.username || 'U').substring(0, 2).toUpperCase();\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-900 rounded-md p-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-start gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-8 h-8 rounded-full bg-red-700 flex items-center justify-center font-bold text-xs flex-shrink-0\",\n              children: initials\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex-1 min-w-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-baseline gap-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-bold text-sm\",\n                  children: comment.username || 'Utilisateur'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-xs text-red-300\",\n                  children: getTimeAgo(comment.createdAt)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm mt-1 break-words\",\n                children: comment.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(CommentSection, \"exk7IbnvxzNv3Hc23LuLTiD2Zus=\");\n_c = CommentSection;\nvar _c;\n$RefreshReg$(_c, \"CommentSection\");","map":{"version":3,"names":["useState","addComment","jsxDEV","_jsxDEV","CommentSection","postId","comments","onCommentAdded","_s","commentContent","setCommentContent","isSubmitting","setIsSubmitting","handleSubmit","e","preventDefault","trim","error","console","handleKeyPress","key","shiftKey","getTimeAgo","timestamp","now","Date","commentDate","seconds","Math","floor","minutes","hours","days","className","children","onSubmit","type","value","onChange","target","onKeyPress","placeholder","disabled","fileName","_jsxFileName","lineNumber","columnNumber","length","map","comment","index","initials","username","substring","toUpperCase","createdAt","content","_c","$RefreshReg$"],"sources":["C:/Users/Hp/Desktop/Cloud_Project/frontend/src/components/comment-section.js"],"sourcesContent":["import { useState } from 'react';\r\nimport { addComment } from '../services/socialService';\r\n\r\nexport default function CommentSection({ postId, comments = [], onCommentAdded }) {\r\n  const [commentContent, setCommentContent] = useState('');\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!commentContent.trim()) return;\r\n\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      await addComment(postId, commentContent.trim());\r\n      setCommentContent('');\r\n      if (onCommentAdded) {\r\n        onCommentAdded();\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur lors de l\\'ajout du commentaire:', error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSubmit(e);\r\n    }\r\n  };\r\n\r\n  // Calculer le temps écoulé\r\n  const getTimeAgo = (timestamp) => {\r\n    if (!timestamp) return '';\r\n    \r\n    const now = new Date();\r\n    const commentDate = new Date(timestamp);\r\n    const seconds = Math.floor((now - commentDate) / 1000);\r\n\r\n    if (seconds < 60) return `Il y a ${seconds}s`;\r\n    const minutes = Math.floor(seconds / 60);\r\n    if (minutes < 60) return `Il y a ${minutes}min`;\r\n    const hours = Math.floor(minutes / 60);\r\n    if (hours < 24) return `Il y a ${hours}h`;\r\n    const days = Math.floor(hours / 24);\r\n    return `Il y a ${days}j`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-3 pt-3 border-t border-red-700\">\r\n      {/* Formulaire d'ajout de commentaire */}\r\n      <form onSubmit={handleSubmit} className=\"mb-3\">\r\n        <div className=\"flex gap-2\">\r\n          <input\r\n            type=\"text\"\r\n            value={commentContent}\r\n            onChange={(e) => setCommentContent(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n            placeholder=\"Ajouter un commentaire...\"\r\n            className=\"flex-1 p-2 rounded-md bg-red-900 text-white placeholder-red-300 border-none focus:outline-none focus:ring-2 focus:ring-red-600 text-sm\"\r\n            disabled={isSubmitting}\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isSubmitting || !commentContent.trim()}\r\n            className=\"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm\"\r\n          >\r\n            Envoyer\r\n          </button>\r\n        </div>\r\n      </form>\r\n\r\n      {/* Liste des commentaires */}\r\n      <div className=\"space-y-2\">\r\n        {comments.length === 0 ? (\r\n          <p className=\"text-red-300 text-sm text-center py-3\">\r\n            Aucun commentaire pour le moment\r\n          </p>\r\n        ) : (\r\n          comments.map((comment, index) => {\r\n            const initials = (comment.username || 'U').substring(0, 2).toUpperCase();\r\n            \r\n            return (\r\n              <div key={index} className=\"bg-red-900 rounded-md p-3\">\r\n                <div className=\"flex items-start gap-2\">\r\n                  <div className=\"w-8 h-8 rounded-full bg-red-700 flex items-center justify-center font-bold text-xs flex-shrink-0\">\r\n                    {initials}\r\n                  </div>\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <div className=\"flex items-baseline gap-2\">\r\n                      <span className=\"font-bold text-sm\">{comment.username || 'Utilisateur'}</span>\r\n                      <span className=\"text-xs text-red-300\">{getTimeAgo(comment.createdAt)}</span>\r\n                    </div>\r\n                    <p className=\"text-sm mt-1 break-words\">{comment.content}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}