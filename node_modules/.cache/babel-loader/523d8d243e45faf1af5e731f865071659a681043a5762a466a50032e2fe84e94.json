{"ast":null,"code":"import{useState,useEffect}from'react';import Sidebar from\"../components/sidebar\";import Navbar from\"../components/navbar\";import Post from\"../components/post\";import CreatePost from\"../components/create-post\";import SuggestedUsers from\"../components/suggested-users\";import ProfilePage from\"./profile\";import FantazyPage from\"./fantazy\";import PlayersPage from\"./players\";import MyTeamPage from\"./my-team\";import LeaderboardPage from\"./leaderboard\";import{getAllPosts}from'../services/socialService';import MarketplacePage from\"./marketplace\";import CreateProductPage from\"./create-product\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(_ref){let{onLogout}=_ref;const[view,setView]=useState('feed');const[posts,setPosts]=useState([]);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState('');// Charger les posts depuis le social-service\nconst loadPosts=async()=>{setIsLoading(true);setError('');try{const fetchedPosts=await getAllPosts();// Trier par date d√©croissante\nconst sortedPosts=fetchedPosts.sort((a,b)=>new Date(b.createdAt)-new Date(a.createdAt));setPosts(sortedPosts);}catch(err){console.error('Erreur lors du chargement des posts:',err);setError('Impossible de charger les posts');setPosts([]);}finally{setIsLoading(false);}};// Charger les posts au montage du composant\nuseEffect(()=>{if(view==='feed'){loadPosts();// Auto-refresh toutes les 30 secondes\nconst interval=setInterval(loadPosts,30000);return()=>clearInterval(interval);}},[view]);const handleNavigate=destination=>{if(destination==='profile'){setView('profile');}else if(destination==='fantazy'){setView('fantazy');}else if(destination==='players'){setView('players');}else if(destination==='myteam'){setView('myteam');}else if(destination==='leaderboard'){setView('leaderboard');}else if(destination==='shop'){setView('shop');}else if(destination==='createProduct'){setView('createProduct');}else{setView('feed');}};if(view==='profile'){return/*#__PURE__*/_jsx(ProfilePage,{onLogout:onLogout,onBack:()=>setView('feed'),onNavigate:handleNavigate});}if(view==='fantazy'){return/*#__PURE__*/_jsx(FantazyPage,{onLogout:onLogout,onBack:()=>setView('feed'),onNavigate:handleNavigate});}if(view==='players'){return/*#__PURE__*/_jsx(PlayersPage,{onLogout:onLogout,onBack:()=>setView('fantazy'),onNavigate:handleNavigate});}if(view==='myteam'){return/*#__PURE__*/_jsx(MyTeamPage,{onLogout:onLogout,onBack:()=>setView('fantazy'),onNavigate:handleNavigate});}if(view==='leaderboard'){return/*#__PURE__*/_jsx(LeaderboardPage,{onLogout:onLogout,onBack:()=>setView('fantazy'),onNavigate:handleNavigate});}if(view==='shop'){return/*#__PURE__*/_jsx(MarketplacePage,{onLogout:onLogout,onBack:()=>setView('feed'),onNavigate:handleNavigate});}if(view==='createProduct'){return/*#__PURE__*/_jsx(CreateProductPage,{onLogout:onLogout,onBack:()=>setView('shop'),onNavigate:handleNavigate});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen text-white\",style:{backgroundImage:\"url('/images/ar.png')\",backgroundSize:'cover',backgroundPosition:'center',backgroundAttachment:'fixed'},children:[/*#__PURE__*/_jsx(Sidebar,{onLogout:onLogout,onNavigate:handleNavigate}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-20 p-4\",children:[/*#__PURE__*/_jsx(Navbar,{onProfileClick:()=>setView('profile')}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(CreatePost,{onPostCreated:loadPosts}),isLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-800 rounded-md p-4 mb-4 text-white text-center\",children:\"\\uD83D\\uDD04 Chargement des posts...\"}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-900 rounded-md p-4 mb-4 text-white\",children:[\"\\u26A0\\uFE0F \",error]}),!isLoading&&!error&&posts.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-800 rounded-md p-8 mb-4 text-white text-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-2\",children:\"\\uD83D\\uDCED Aucun post pour le moment\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-200\",children:\"Soyez le premier \\xE0 partager quelque chose !\"})]}),!isLoading&&!error&&posts.map(post=>/*#__PURE__*/_jsx(Post,{postId:post.id,user:post.username,content:post.content,image:post.image,createdAt:post.createdAt,likesCount:post.likesCount,commentsCount:post.commentsCount,isLiked:post.isLiked,userLikes:post.userLikes,onUpdate:loadPosts},post.id))]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-80 flex flex-col\",children:/*#__PURE__*/_jsx(SuggestedUsers,{})})]})]})]});}","map":{"version":3,"names":["useState","useEffect","Sidebar","Navbar","Post","CreatePost","SuggestedUsers","ProfilePage","FantazyPage","PlayersPage","MyTeamPage","LeaderboardPage","getAllPosts","MarketplacePage","CreateProductPage","jsx","_jsx","jsxs","_jsxs","Home","_ref","onLogout","view","setView","posts","setPosts","isLoading","setIsLoading","error","setError","loadPosts","fetchedPosts","sortedPosts","sort","a","b","Date","createdAt","err","console","interval","setInterval","clearInterval","handleNavigate","destination","onBack","onNavigate","className","style","backgroundImage","backgroundSize","backgroundPosition","backgroundAttachment","children","onProfileClick","onPostCreated","length","map","post","postId","id","user","username","content","image","likesCount","commentsCount","isLiked","userLikes","onUpdate"],"sources":["C:/Users/Hp/Desktop/frontend/src/pages/home.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport Sidebar from \"../components/sidebar\"\r\nimport Navbar from \"../components/navbar\"\r\nimport Post from \"../components/post\"\r\nimport CreatePost from \"../components/create-post\"\r\nimport SuggestedUsers from \"../components/suggested-users\"\r\nimport ProfilePage from \"./profile\"\r\nimport FantazyPage from \"./fantazy\"\r\nimport PlayersPage from \"./players\"\r\nimport MyTeamPage from \"./my-team\"\r\nimport LeaderboardPage from \"./leaderboard\"\r\nimport { getAllPosts } from '../services/socialService'\r\nimport MarketplacePage from \"./marketplace\"\r\nimport CreateProductPage from \"./create-product\"\r\n\r\nexport default function Home({ onLogout }) {\r\n  const [view, setView] = useState('feed');\r\n  const [posts, setPosts] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n\r\n  // Charger les posts depuis le social-service\r\n  const loadPosts = async () => {\r\n    setIsLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const fetchedPosts = await getAllPosts();\r\n      // Trier par date d√©croissante\r\n      const sortedPosts = fetchedPosts.sort((a, b) => \r\n        new Date(b.createdAt) - new Date(a.createdAt)\r\n      );\r\n      setPosts(sortedPosts);\r\n    } catch (err) {\r\n      console.error('Erreur lors du chargement des posts:', err);\r\n      setError('Impossible de charger les posts');\r\n      setPosts([]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Charger les posts au montage du composant\r\n  useEffect(() => {\r\n    if (view === 'feed') {\r\n      loadPosts();\r\n      \r\n      // Auto-refresh toutes les 30 secondes\r\n      const interval = setInterval(loadPosts, 30000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [view]);\r\n\r\n  const handleNavigate = (destination) => {\r\n    if (destination === 'profile') {\r\n      setView('profile');\r\n    } else if (destination === 'fantazy') {\r\n      setView('fantazy');\r\n    } else if (destination === 'players') {\r\n      setView('players');\r\n    } else if (destination === 'myteam') {\r\n      setView('myteam');\r\n    } else if (destination === 'leaderboard') {\r\n      setView('leaderboard');\r\n    } else if (destination === 'shop') {\r\n      setView('shop');\r\n    } else if (destination === 'createProduct') {\r\n      setView('createProduct');\r\n    } else {\r\n      setView('feed');\r\n    }\r\n  };\r\n\r\n  if (view === 'profile') {\r\n    return <ProfilePage onLogout={onLogout} onBack={() => setView('feed')} onNavigate={handleNavigate} />;\r\n  }\r\n\r\n  if (view === 'fantazy') {\r\n    return <FantazyPage onLogout={onLogout} onBack={() => setView('feed')} onNavigate={handleNavigate} />;\r\n  }\r\n\r\n  if (view === 'players') {\r\n    return <PlayersPage onLogout={onLogout} onBack={() => setView('fantazy')} onNavigate={handleNavigate} />;\r\n  }\r\n\r\n  if (view === 'myteam') {\r\n    return <MyTeamPage onLogout={onLogout} onBack={() => setView('fantazy')} onNavigate={handleNavigate} />;\r\n  }\r\n\r\n  if (view === 'leaderboard') {\r\n    return <LeaderboardPage onLogout={onLogout} onBack={() => setView('fantazy')} onNavigate={handleNavigate} />;\r\n  }\r\n  if (view === 'shop') {\r\n    return <MarketplacePage onLogout={onLogout} onBack={() => setView('feed')} onNavigate={handleNavigate} />;\r\n  }\r\n  \r\n  if (view === 'createProduct') {\r\n    return <CreateProductPage onLogout={onLogout} onBack={() => setView('shop')} onNavigate={handleNavigate} />;\r\n  }\r\n  \r\n  return (\r\n    <div \r\n      className=\"min-h-screen text-white\"\r\n      style={{ \r\n        backgroundImage: \"url('/images/ar.png')\",\r\n        backgroundSize: 'cover',\r\n        backgroundPosition: 'center',\r\n        backgroundAttachment: 'fixed'\r\n      }}\r\n    >\r\n      <Sidebar onLogout={onLogout} onNavigate={handleNavigate} />\r\n      <div className=\"ml-20 p-4\">\r\n        <Navbar onProfileClick={() => setView('profile')} />\r\n        <div className=\"flex space-x-4\">\r\n          <div className=\"flex-1\">\r\n            {/* Formulaire de cr√©ation de post */}\r\n            <CreatePost onPostCreated={loadPosts} />\r\n\r\n            {/* Message de chargement */}\r\n            {isLoading && (\r\n              <div className=\"bg-red-800 rounded-md p-4 mb-4 text-white text-center\">\r\n                üîÑ Chargement des posts...\r\n              </div>\r\n            )}\r\n\r\n            {/* Message d'erreur */}\r\n            {error && (\r\n              <div className=\"bg-red-900 rounded-md p-4 mb-4 text-white\">\r\n                ‚ö†Ô∏è {error}\r\n              </div>\r\n            )}\r\n\r\n            {/* Liste des posts */}\r\n            {!isLoading && !error && posts.length === 0 && (\r\n              <div className=\"bg-red-800 rounded-md p-8 mb-4 text-white text-center\">\r\n                <h3 className=\"text-xl font-bold mb-2\">üì≠ Aucun post pour le moment</h3>\r\n                <p className=\"text-red-200\">Soyez le premier √† partager quelque chose !</p>\r\n              </div>\r\n            )}\r\n\r\n            {!isLoading && !error && posts.map((post) => (\r\n              <Post\r\n                key={post.id}\r\n                postId={post.id}\r\n                user={post.username}\r\n                content={post.content}\r\n                image={post.image}\r\n                createdAt={post.createdAt}\r\n                likesCount={post.likesCount}\r\n                commentsCount={post.commentsCount}\r\n                isLiked={post.isLiked}\r\n                userLikes={post.userLikes}\r\n                onUpdate={loadPosts}\r\n              />\r\n            ))}\r\n          </div>\r\n          <div className=\"w-80 flex flex-col\">\r\n            <SuggestedUsers />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}