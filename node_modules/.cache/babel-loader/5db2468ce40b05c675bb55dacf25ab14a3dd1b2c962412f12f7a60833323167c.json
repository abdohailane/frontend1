{"ast":null,"code":"import { API_CONFIG } from '../config/config';\n\n// URL de l'API Social Service\nconst SOCIAL_API_URL = `${API_CONFIG.SOCIAL_SERVICE}/api`;\n\n// Récupérer l'userId depuis le localStorage\nconst getCurrentUserId = () => {\n  return localStorage.getItem('userId');\n};\n\n// Récupérer le username depuis le localStorage\nconst getCurrentUsername = () => {\n  return localStorage.getItem('username') || 'Utilisateur';\n};\n\n// GET - Récupérer tous les posts\nexport const getAllPosts = async () => {\n  try {\n    const userId = getCurrentUserId();\n    const url = userId ? `${SOCIAL_API_URL}/posts?currentUserId=${userId}` : `${SOCIAL_API_URL}/posts`;\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n    const posts = await response.json();\n    return posts;\n  } catch (error) {\n    console.error('❌ Error fetching posts:', error);\n    throw error;\n  }\n};\n\n// POST - Créer un nouveau post\nexport const createPost = async content => {\n  try {\n    const userId = getCurrentUserId();\n    const username = getCurrentUsername();\n    if (!userId) {\n      throw new Error('User not logged in');\n    }\n    const response = await fetch(`${SOCIAL_API_URL}/posts`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userId: userId,\n        username: username,\n        content: content\n      })\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n    const newPost = await response.json();\n    return newPost;\n  } catch (error) {\n    console.error('❌ Error creating post:', error);\n    throw error;\n  }\n};\n\n// POST - Liker un post\nexport const likePost = async postId => {\n  try {\n    const userId = getCurrentUserId();\n    if (!userId) {\n      throw new Error('User not logged in');\n    }\n    const response = await fetch(`${SOCIAL_API_URL}/posts/${postId}/like?userId=${userId}`, {\n      method: 'POST'\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n    const updatedPost = await response.json();\n    return updatedPost;\n  } catch (error) {\n    console.error('❌ Error liking post:', error);\n    throw error;\n  }\n};\n\n// POST - Unliker un post\nexport const unlikePost = async postId => {\n  try {\n    const userId = getCurrentUserId();\n    if (!userId) {\n      throw new Error('User not logged in');\n    }\n    const response = await fetch(`${SOCIAL_API_URL}/posts/${postId}/unlike?userId=${userId}`, {\n      method: 'POST'\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n    const updatedPost = await response.json();\n    return updatedPost;\n  } catch (error) {\n    console.error('❌ Error unliking post:', error);\n    throw error;\n  }\n};\n\n// GET - Récupérer un post avec ses commentaires\nexport const getPostDetails = async postId => {\n  try {\n    const userId = getCurrentUserId();\n    const url = userId ? `${SOCIAL_API_URL}/posts/${postId}?currentUserId=${userId}` : `${SOCIAL_API_URL}/posts/${postId}`;\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n    const post = await response.json();\n    return post;\n  } catch (error) {\n    console.error('❌ Error fetching post details:', error);\n    throw error;\n  }\n};\n\n// POST - Ajouter un commentaire\nexport const addComment = async (postId, content) => {\n  try {\n    const userId = getCurrentUserId();\n    const username = getCurrentUsername();\n    if (!userId) {\n      throw new Error('User not logged in');\n    }\n    const response = await fetch(`${SOCIAL_API_URL}/posts/${postId}/comments`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userId: userId,\n        username: username,\n        content: content\n      })\n    });\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n    const newComment = await response.json();\n    return newComment;\n  } catch (error) {\n    console.error('❌ Error adding comment:', error);\n    throw error;\n  }\n};\nexport default {\n  getAllPosts,\n  createPost,\n  likePost,\n  unlikePost,\n  getPostDetails,\n  addComment\n};","map":{"version":3,"names":["API_CONFIG","SOCIAL_API_URL","SOCIAL_SERVICE","getCurrentUserId","localStorage","getItem","getCurrentUsername","getAllPosts","userId","url","response","fetch","ok","Error","status","posts","json","error","console","createPost","content","username","method","headers","body","JSON","stringify","newPost","likePost","postId","updatedPost","unlikePost","getPostDetails","post","addComment","newComment"],"sources":["C:/Users/Hp/Desktop/Cloud_Project/frontend/src/services/socialService.js"],"sourcesContent":["import { API_CONFIG } from '../config/config';\r\n\r\n// URL de l'API Social Service\r\nconst SOCIAL_API_URL = `${API_CONFIG.SOCIAL_SERVICE}/api`;\r\n\r\n// Récupérer l'userId depuis le localStorage\r\nconst getCurrentUserId = () => {\r\n  return localStorage.getItem('userId');\r\n};\r\n\r\n// Récupérer le username depuis le localStorage\r\nconst getCurrentUsername = () => {\r\n  return localStorage.getItem('username') || 'Utilisateur';\r\n};\r\n\r\n// GET - Récupérer tous les posts\r\nexport const getAllPosts = async () => {\r\n  try {\r\n    const userId = getCurrentUserId();\r\n    const url = userId \r\n      ? `${SOCIAL_API_URL}/posts?currentUserId=${userId}`\r\n      : `${SOCIAL_API_URL}/posts`;\r\n    \r\n    const response = await fetch(url);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n    const posts = await response.json();\r\n    return posts;\r\n  } catch (error) {\r\n    console.error('❌ Error fetching posts:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// POST - Créer un nouveau post\r\nexport const createPost = async (content) => {\r\n  try {\r\n    const userId = getCurrentUserId();\r\n    const username = getCurrentUsername();\r\n\r\n    if (!userId) {\r\n      throw new Error('User not logged in');\r\n    }\r\n\r\n    const response = await fetch(`${SOCIAL_API_URL}/posts`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        userId: userId,\r\n        username: username,\r\n        content: content\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n\r\n    const newPost = await response.json();\r\n    return newPost;\r\n  } catch (error) {\r\n    console.error('❌ Error creating post:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// POST - Liker un post\r\nexport const likePost = async (postId) => {\r\n  try {\r\n    const userId = getCurrentUserId();\r\n    if (!userId) {\r\n      throw new Error('User not logged in');\r\n    }\r\n\r\n    const response = await fetch(\r\n      `${SOCIAL_API_URL}/posts/${postId}/like?userId=${userId}`,\r\n      { method: 'POST' }\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n\r\n    const updatedPost = await response.json();\r\n    return updatedPost;\r\n  } catch (error) {\r\n    console.error('❌ Error liking post:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// POST - Unliker un post\r\nexport const unlikePost = async (postId) => {\r\n  try {\r\n    const userId = getCurrentUserId();\r\n    if (!userId) {\r\n      throw new Error('User not logged in');\r\n    }\r\n\r\n    const response = await fetch(\r\n      `${SOCIAL_API_URL}/posts/${postId}/unlike?userId=${userId}`,\r\n      { method: 'POST' }\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n\r\n    const updatedPost = await response.json();\r\n    return updatedPost;\r\n  } catch (error) {\r\n    console.error('❌ Error unliking post:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// GET - Récupérer un post avec ses commentaires\r\nexport const getPostDetails = async (postId) => {\r\n  try {\r\n    const userId = getCurrentUserId();\r\n    const url = userId\r\n      ? `${SOCIAL_API_URL}/posts/${postId}?currentUserId=${userId}`\r\n      : `${SOCIAL_API_URL}/posts/${postId}`;\r\n\r\n    const response = await fetch(url);\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n\r\n    const post = await response.json();\r\n    return post;\r\n  } catch (error) {\r\n    console.error('❌ Error fetching post details:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\n// POST - Ajouter un commentaire\r\nexport const addComment = async (postId, content) => {\r\n  try {\r\n    const userId = getCurrentUserId();\r\n    const username = getCurrentUsername();\r\n\r\n    if (!userId) {\r\n      throw new Error('User not logged in');\r\n    }\r\n\r\n    const response = await fetch(`${SOCIAL_API_URL}/posts/${postId}/comments`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        userId: userId,\r\n        username: username,\r\n        content: content\r\n      })\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP ${response.status}`);\r\n    }\r\n\r\n    const newComment = await response.json();\r\n    return newComment;\r\n  } catch (error) {\r\n    console.error('❌ Error adding comment:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport default {\r\n  getAllPosts,\r\n  createPost,\r\n  likePost,\r\n  unlikePost,\r\n  getPostDetails,\r\n  addComment\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}